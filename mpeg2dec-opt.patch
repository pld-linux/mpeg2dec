diff -aurN mpeg2dec-0.5.0.orig/configure.in mpeg2dec-0.5.0/configure.in
--- mpeg2dec-0.5.0.orig/configure.in	2006-02-14 15:09:03.000000000 +0100
+++ mpeg2dec-0.5.0/configure.in	2006-03-12 11:40:13.180188680 +0100
@@ -34,13 +34,6 @@
     TRY_CFLAGS="$OPT_CFLAGS -Wall"
     AC_TRY_CFLAGS([$TRY_CFLAGS $CFLAGS],[OPT_CFLAGS="$TRY_CFLAGS"])
 
-    dnl -O3
-    changequote(<<,>>)
-    TRY_CFLAGS=`echo "$OPT_CFLAGS $CFLAGS"|sed "s/-O[0-9]*//g"`
-    changequote([,])
-    TRY_CFLAGS="$TRY_CFLAGS -O3"
-    AC_TRY_CFLAGS([$TRY_CFLAGS],[OPT_CFLAGS="$TRY_CFLAGS"; CFLAGS=""])
-
     AC_ARG_ENABLE([debug],
 	[  --enable-debug          debug mode configuration])
     if test x"$enable_debug" = x"yes"; then
@@ -51,25 +44,14 @@
 	AC_TRY_CFLAGS([$TRY_CFLAGS $CFLAGS],[OPT_CFLAGS="$TRY_CFLAGS"])
     fi
 
-    dnl -fno-common
-    TRY_CFLAGS="$OPT_CFLAGS -fno-common"
-    AC_TRY_CFLAGS([$TRY_CFLAGS $CFLAGS],[OPT_CFLAGS="$TRY_CFLAGS"])
-
     dnl arch-specific flags
     case "$host" in
     i?86-* | k?-* | x86_64-* | amd64-*)
 	AC_DEFINE([ARCH_X86],,[x86 architecture])
-	case "$host" in
-	i386-*) TRY_CFLAGS="$OPT_CFLAGS -mcpu=i386";;
-	i486-*) TRY_CFLAGS="$OPT_CFLAGS -mcpu=i486";;
-	i586-*) TRY_CFLAGS="$OPT_CFLAGS -mcpu=pentium";;
-	i686-*) TRY_CFLAGS="$OPT_CFLAGS -mcpu=pentiumpro";;
-	k6-*)   TRY_CFLAGS="$OPT_CFLAGS -mcpu=k6";;
-	esac
-	AC_TRY_CFLAGS([$TRY_CFLAGS $CFLAGS],[OPT_CFLAGS="$TRY_CFLAGS"]);;
+	;;
     ppc-* | powerpc-*)
 	have_altivec=no
-	for TRY_CFLAGS in "-mpim-altivec -force_cpusubtype_ALL" -faltivec -maltivec -fvec; do
+	for TRY_CFLAGS in "-mpim-altivec -force_cpusubtype_ALL" -faltivec -maltivec -mabi=altivec -fvec; do
 	    AC_TRY_CFLAGS([$OPT_CFLAGS $TRY_CFLAGS $CFLAGS],
 		[save_CFLAGS="$CFLAGS"
 		 CFLAGS="$OPT_CFLAGS $TRY_CFLAGS $CFLAGS"
@@ -93,8 +75,8 @@
 	done;;
     sparc-* | sparc64-*)
 	AC_DEFINE([ARCH_SPARC],,[sparc architecture])
-	TRY_CFLAGS="$OPT_CFLAGS -mcpu=ultrasparc -mvis"
-	AC_TRY_CFLAGS([$TRY_CFLAGS $CFLAGS],[OPT_CFLAGS="$TRY_CFLAGS"]);;
+	TRY_CFLAGS="$ARCH_OPT_CFLAGS -mcpu=ultrasparc -mvis"
+	AC_TRY_CFLAGS([$OPT_CFLAGS $TRY_CFLAGS $CFLAGS],[ARCH_OPT_CFLAGS="$TRY_CFLAGS"]);;
     alpha*)
 	AC_DEFINE([ARCH_ALPHA],,[alpha architecture]);;
     esac
